{% extends "base.html" %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<article class="fade-in" style="max-width: 800px; margin: 0 auto;">
    <header class="mb-2">
        <div style="margin-bottom: 1.5rem; text-align: center;">
            <span class="tag" style="text-transform: uppercase; font-weight: 600; letter-spacing: 0.05em;">{{ post.category }}</span>
        </div>
        <h1 style="margin-bottom: 1.5rem; text-align: center;">{{ post.title }}</h1>
        <div style="display: flex; justify-content: center; align-items: center; gap: 1.5rem; color: var(--text-muted); font-size: 0.9rem; flex-wrap: wrap;">
            <span style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="color: var(--accent-primary);">üìÖ</span>
                {{ post.published_at.strftime('%B %d, %Y') }}
            </span>
            <span>‚Ä¢</span>
            <span style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="color: var(--accent-primary);">‚è±Ô∏è</span>
                {{ post.reading_time }} min read
            </span>
            <span>‚Ä¢</span>
            <span style="display: flex; align-items: center; gap: 0.5rem;">
                <span style="color: var(--accent-primary);">üëÅÔ∏è</span>
                {{ post.views }} views
            </span>
        </div>
    </header>

    {% if post.image %}
    <div class="mb-2" style="border-radius: var(--radius-md); overflow: hidden; box-shadow: 0 8px 30px var(--shadow);">
        <img src="{{ post.image }}" alt="{{ post.title }}" loading="lazy" style="width: 100%; max-height: 450px; object-fit: cover;">
    </div>
    {% endif %}

    <div class="card" style="font-size: 1.1rem; line-height: 1.9; padding: 3rem;">
        {{ content | safe }}
    </div>

    <!-- Tags -->
    {% if post.tags %}
    <div class="mb-2" style="display: flex; flex-wrap: wrap; gap: 0.75rem; padding: 2rem 0; border-top: 1px solid var(--border); border-bottom: 1px solid var(--border);">
        {% for tag in post.tags %}
        <span class="tag">#{{ tag }}</span>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Reactions -->
    <div class="card mb-2 text-center">
        <h3 style="margin-bottom: 1.5rem;">Show Your Support</h3>
        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
            <button class="btn btn-outline" hx-post="/api/blog/posts/{{ post.slug }}/react" hx-vals='{"type": "like"}' hx-swap="none" style="min-width: 120px;">
                üëç Like
            </button>
            <button class="btn btn-outline" hx-post="/api/blog/posts/{{ post.slug }}/react" hx-vals='{"type": "love"}' hx-swap="none" style="min-width: 120px;">
                ‚ù§Ô∏è Love
            </button>
            <button class="btn btn-outline" hx-post="/api/blog/posts/{{ post.slug }}/react" hx-vals='{"type": "fire"}' hx-swap="none" style="min-width: 120px;">
                üî• Fire
            </button>
        </div>
    </div>

    <!-- Comments Section -->
    <section id="comments" class="card" hx-get="/comments/post/{{ post.slug }}" hx-trigger="load">
        <h3 style="margin-bottom: 1.5rem;">Comments</h3>
        <div class="htmx-indicator text-center">
            <div class="spinner" style="margin: 2rem auto;"></div>
            <p style="color: var(--accent-primary);">Loading comments...</p>
        </div>
    </section>
</article>

<style>
    .content h1, .content h2, .content h3 {
        margin-top: 2rem;
        margin-bottom: 1rem;
    }
    
    .content p {
        margin-bottom: 1.2rem;
    }
    
    .content code {
        background: var(--bg-secondary);
        padding: 2px 8px;
        border-radius: 4px;
        font-size: 0.9em;
        color: var(--accent-primary);
    }
    
    .content pre {
        background: var(--bg-secondary);
        padding: 1.5rem;
        border-radius: var(--radius-sm);
        overflow-x: auto;
        margin: 1.5rem 0;
        border: 1px solid var(--border);
    }
    
    .content pre code {
        background: none;
        padding: 0;
    }
    
    .content a {
        color: var(--accent-primary);
        text-decoration: underline;
    }
    
    .content img {
        max-width: 100%;
        border-radius: var(--radius-sm);
        margin: 1.5rem 0;
    }
</style>
{% endblock %}
