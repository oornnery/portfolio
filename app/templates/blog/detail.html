{% extends "base.html" %}

{% block title %}{{ post.title }} - Fabio Souza{% endblock %}

{% block content %}
<article>
    <header class="mb-10">
        <div class="flex items-center gap-2 text-sm text-gray-500 mb-4">
            <time class="text-sm text-gray-500 font-mono shrink-0">{{ post.published_at.strftime('%Y-%m-%d') }}</time>
        </div>
        <div class="flex items-baseline gap-4 mb-4">
            <h1 class="text-3xl md:text-4xl font-bold text-white tracking-tight">{{ post.title }}</h1>
        </div>
        <div class="flex gap-2">
            {% for tag in post.tags %}
            <span class="text-xs text-gray-500 bg-gray-900 px-2 py-1 rounded border border-gray-800">#{{ tag }}</span>
            {% endfor %}
        </div>
    </header>

    <div class="prose prose-invert prose-gray max-w-none prose-headings:font-semibold prose-a:text-blue-400 hover:prose-a:text-blue-300">
        {{ content | safe }}
    </div>

    <div class="mt-16 pt-8 border-t border-gray-900">
        <h3 class="text-lg font-semibold text-white mb-6">Discussion</h3>
        <div id="comments-section"
             hx-get="/comments/post/{{ post.slug }}" 
             hx-trigger="load delay:100ms" 
             class="text-gray-500 text-sm min-h-[200px]">
             <div class="flex items-center gap-2">
                 <div class="animate-spin h-4 w-4 border-2 border-blue-500 rounded-full border-t-transparent"></div>
                 <span>Loading comments...</span>
             </div>
        </div>
    </div>
</article>
{% endblock %}
