{#import "../ui/input.jinja" as Input #}
{#import "../ui/button.jinja" as Button #}
{#import "../ui/alert.jinja" as Alert #}
{#def csrf_token, success="", errors={}, form_data={} #}

{% if success %}
<Alert message={{ success }} tone="success" />
{% endif %}

{% if errors.get('csrf') %}
<Alert message={{ errors.get('csrf') }} tone="danger" />
{% endif %}

{% if errors.get('form') %}
<Alert message={{ errors.get('form') }} tone="danger" />
{% endif %}

<form {{ attrs.render(class="space-y-4") }} method="post" action="/contact" novalidate>
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <input type="hidden" name="subject" value="{{ form_data.get('subject', 'Contact form submission') }}">

    <Input
        name="name"
        label="Name"
        placeholder="Your Name"
        value={{ form_data.get('name', '') }}
        required={{ true }}
        error={{ errors.get('name', '') }}
        minlength="2"
        maxlength="100"
    />

    <Input
        name="email"
        type="email"
        label="Email"
        placeholder="your@email.com"
        value={{ form_data.get('email', '') }}
        required={{ true }}
        error={{ errors.get('email', '') }}
    />

    <Input
        name="message"
        type="textarea"
        label="Message"
        placeholder="Your message..."
        value={{ form_data.get('message', '') }}
        rows={{ 4 }}
        required={{ true }}
        error={{ errors.get('message', '') }}
        minlength="10"
        maxlength="5000"
    />

    <Button
        type="submit"
        variant="primary"
    >
        Send Message
    </Button>
</form>
